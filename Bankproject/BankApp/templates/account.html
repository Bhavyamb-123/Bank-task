{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Dashboard - SecureBank</title>
    <link rel="stylesheet" href="{% static 'css/account.css' %}">
</head>
<body>
    <!-- money transfer  -->
<div id="transferModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closemoneyModal()">&times;</span>
            <h2>ðŸ’¸ Transfer Money</h2>
            <form method="POST" action="{% url 'transfer' %}">
                {% csrf_token %}
                <div class="form-group">
                    <label for="recipient_account">Recipient Account Number</label>
                    <input type="text" id="recipient_account" name="recipient_account" placeholder="Enter account number" required>
                </div>
                <div class="form-group">
                    <label for="amount">Amount (â‚¹)</label>
                    <input type="number" id="amount" name="amount" step="0.01" min="1" placeholder="Enter amount" required>
                </div>
                <div class="form-group">
                    <label for="description">Description (Optional)</label>
                    <input type="text" id="description" name="description" placeholder="e.g. Rent, Gift, Bills">
                </div>
                <div class="form-group">
                    <label for="pin">Enter PIN</label>
                    <input type="password" id="pin" name="pin" maxlength="6" placeholder="Your 4-6 digit PIN" required>
                </div>
                <button type="submit" class="btn-primary">Send Money</button>
            </form>
        </div>
    </div>



 <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-content">
                <div class="logo">
                    <h1>SecureBank</h1>
                </div>
                
                <div class="nav-links">
                    <a href="{% url 'homepage'%}" class="nav-link">Home</a>
                    <a href="#" class="nav-link">About us</a>
                    <a href="#" class="nav-link">Loans</a>
                    <a href="{% url 'account_dashboard' %}"class="nav-link">Account</a>
                    <a href="#" class="nav-link">Support</a>
                </div>
                
                <!-- <div class="auth-buttons">
                    <button class="btn-ghost">Log Out</button>
                    <button class="btn-ghost" onclick="openModal('login')">Log In</button>
                    <button class="btn-primary" onclick="openModal('signup')">Sign Up</button>
                   
                </div> -->

                <div class="auth-buttons">
    {% if request.user.is_authenticated %}
        <!-- <span class="username">Hi, {{ request.user.username }}</span> -->
        <a href="{% url 'logout' %}">
            <button class="btn-ghost">Log Out</button>
        </a>
    {% else %}
        <button class="btn-ghost" onclick="openModal('login')">Log In</button>
        <button class="btn-primary" onclick="openModal('signup')">Sign Up</button>
    {% endif %}
</div>
                
                <button class="mobile-menu-btn">â˜°</button>
            </div>
        </div>
    </nav>


    <main class="account-main">
        <div class="container">
            <!-- <div class="account-header">
                <h1>Account Dashboard</h1>
                <p>Welcome back, Joh.....</p>
            </div> -->

            <!-- <div class="account-grid"> -->
                <!-- Account Balance -->
                <!-- <div class="balance-card">
                    <h2>Account Balance</h2>
                    <div class="balance-amount">â‚¹12,345.67</div>
                    <div class="balance-info">
                        <span class="account-number">Account: ****1234</span>
                        <span class="last-updated">Last updated: Today, 2:30 PM</span>
                    </div>
                </div> -->

                <!-- Monthly Summary -->
                <!-- <div class="summary-cards">
                    <div class="summary-card credit">
                        <div class="summary-header">
                            <h3>Total Credits</h3>
                            <span class="arrow-up">â†—</span>
                        </div>
                        <div class="summary-amount">â‚¹5,750.00</div>
                        <div class="summary-period">This month</div>
                    </div>
                    <div class="summary-card debit">
                        <div class="summary-header">
                            <h3>Total Debits</h3>
                            <span class="arrow-down">â†˜</span>
                        </div>
                        <div class="summary-amount">â‚¹3,425.69</div>
                        <div class="summary-period">This month</div>
                    </div>
                </div> -->

                <div class="account-header">
    <h1>Account Dashboard</h1>
    <p>Welcome back, {{ request.user.first_name|upper }} {{ request.user.last_name|upper }}</p>
</div>

<!-- Account Balance -->
<!-- <div class="balance-card">
    <h2>Account Balance</h2>
    <div class="balance-amount">â‚¹{{ account.balance }}</div>
    <div class="balance-info">
        <span class="account-number">Account: {{ account.account_number }}</span>
        <span class="last-updated">Last updated: {{ account.last_updated }}</span>
    </div>
</div> -->


<!-- Balance Card -->
<div class="balance-card">
    <div class="balance-header">
        <h2>Account Balance</h2>
        <button class="btn-primary transfer-btn" onclick="openmoneyModal()">PAY NOW</button>
    </div>
    <div class="balance-amount">â‚¹{{ account.balance }}</div>
    <div class="balance-info">
        <span class="account-number">Account: {{ account.account_number }}</span>
        <span class="last-updated">Last updated: {{ account.last_updated }}</span>
    </div>
</div>

<!-- Monthly Summary -->
<div class="summary-cards">
    <div class="summary-card credit">
        <div class="summary-header">
            <h3>Total Credits</h3>
            <span class="arrow-up">â†—</span>
        </div>
        <div class="summary-amount">â‚¹{{ total_credits }}</div>
        <div class="summary-period">This month</div>
    </div>
   <div class="summary-card debit">
    <div class="summary-header">
        <h3>Total Debits</h3>
        <span class="arrow-down">â†˜</span>
    </div>
    <div class="summary-amount">â‚¹{{ total_debits }}</div>
    <div class="summary-period">This month</div>
</div>
</div>
{% for message in messages %}
<h1>{{message}}</h1>
{% endfor %}
<!-- Transactions -->
<!-- <div class="transaction-history"> -->
    <!-- <div class="transaction-header">
        <h2>Recent Transactions</h2>
    </div> -->  
    <!-- <div class="transaction-header">
                        <h2>Recent Transactions</h2>
                        <select class="filter-select">
                            <option>All Transactions</option>
                            <option>Credits Only</option>
                            <option>Debits Only</option>
                        </select>
                    </div> -->

<!--     
    <div class="transaction-list">
        {% for tx in transactions %}
            <div class="transaction-item">
                <span>{{ tx.timestamp|date:"M d, Y H:i" }}</span> | 
                <strong>{{ tx.transaction_type|title }}</strong> â‚¹{{ tx.amount }} - {{ tx.description }}
            </div>
        {% empty %}
            <p>No recent transactions</p>
        {% endfor %}
    </div>
</div> -->



<div class="transaction-history">
    <div class="transaction-header">
        <h2>Recent Transactions</h2>
        <select id="filterSelect" class="filter-select">
            <option value="all">All Transactions</option>
            <option value="credit">Credits Only</option>
            <option value="debit">Debits Only</option>
        </select>
    </div>

<div class="transaction-list">
    {% for tx in transactions %}
        <div class="transaction-item" data-type="{{ tx.transaction_type }}">
            
            <!-- LEFT SIDE: date + description -->
            <div class="transaction-left">
                <span>{{ tx.timestamp|date:"M d, Y H:i" }}</span> - 
                <span>{{ tx.description }}</span>
            </div>

            <!-- RIGHT SIDE: amount with color -->
            <div class="transaction-right {% if tx.transaction_type == 'credit' %}credit{% else %}debit{% endif %}">
                â‚¹{{ tx.amount }}
            </div>

        </div>
    {% empty %}
        <p>No recent transactions</p>
    {% endfor %}
</div>

<!-- Money Transfer Section -->
<!-- <div class="money-transfer">
    <h2>ðŸ’¸ Transfer Money</h2>
    <form method="POST" action="{% url 'transfer' %}" class="transfer-form">
        {% csrf_token %}

        <div class="form-group">
            <label for="recipient_account">Recipient Account Number</label>
            <input type="text" id="recipient_account" name="recipient_account" placeholder="Enter account number" required>
        </div>

        <div class="form-group">
            <label for="amount">Amount (â‚¹)</label>
            <input type="number" id="amount" name="amount" step="0.01" min="1" placeholder="Enter amount" required>
        </div>

        <div class="form-group">
            <label for="description">Description (Optional)</label>
            <input type="text" id="description" name="description" placeholder="e.g. Rent, Gift, Bills">
        </div>

        <button type="submit" class="btn-primary">Send Money</button>
    </form>
</div> -->

                

                <!-- Transaction History -->
                <!-- <div class="transaction-history">
                    <div class="transaction-header">
                        <h2>Recent Transactions</h2>
                        <select class="filter-select">
                            <option>All Transactions</option>
                            <option>Credits Only</option>
                            <option>Debits Only</option>
                        </select>
                    </div>
                    <div class="transaction-list" id="transactionList"> -->
                        <!-- Transactions will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="{% static 'js/home.js' %}"></script>
</body>
</html>